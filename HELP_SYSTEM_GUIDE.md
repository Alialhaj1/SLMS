# Ø¯Ù„ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØ§Ù„Ø¯Ø¹Ù… (Help & Support System)

## ğŸ“Œ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø·Ù„Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙˆØ§Ø¬Ù‡ÙˆÙ† Ø®Ø·Ø£ 403 (Access Denied). ÙŠØ³Ù…Ø­ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ø§Øª Ø¥Ù„Ù‰ Ù…Ø¯ÙŠØ±ÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©.

## âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡

### 1. Backend API
**Ø§Ù„Ù…Ù„Ù:** `backend/src/routes/helpRequests.ts`

**Endpoints:**
- `POST /api/help-requests` - Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯
- `GET /api/help-requests` - Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙÙ‚Ø·)

**Validation:**
- Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: `access_request` | `permission_request` | `general_support`
- Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹: Ù…Ø·Ù„ÙˆØ¨ØŒ Ø­Ø¯ Ø£Ù‚ØµÙ‰ 200 Ø­Ø±Ù
- Ø§Ù„Ø±Ø³Ø§Ù„Ø©: Ù…Ø·Ù„ÙˆØ¨ØŒ 10-2000 Ø­Ø±Ù
- Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: Ø§Ø®ØªÙŠØ§Ø±ÙŠ
- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: Ø§Ø®ØªÙŠØ§Ø±ÙŠ

### 2. Database Migration
**Ø§Ù„Ù…Ù„Ù:** `backend/migrations/035_create_help_requests_table.sql`

**Ø§Ù„Ø¬Ø¯ÙˆÙ„:** `help_requests`

**Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©:**
- `id` - Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯
- `user_id` - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨ (FK â†’ users)
- `company_id` - Ø§Ù„Ø´Ø±ÙƒØ© (FK â†’ companies)
- `type` - Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ (access_request/permission_request/general_support)
- `subject` - Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ (VARCHAR 200)
- `message` - ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ (TEXT)
- `requested_permission` - Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (VARCHAR 100)
- `requested_page` - Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (VARCHAR 200)
- `status` - Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ (pending/approved/rejected/resolved)
- `admin_response` - Ø±Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ± (TEXT)
- `resolved_by` - Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø°ÙŠ Ø­Ù„ Ø§Ù„Ø·Ù„Ø¨ (FK â†’ users)
- `resolved_at` - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ù„
- `created_at` - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
- `updated_at` - ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«

**Indexes:**
- `idx_help_requests_user` - Ø¹Ù„Ù‰ user_id
- `idx_help_requests_company` - Ø¹Ù„Ù‰ company_id
- `idx_help_requests_status` - Ø¹Ù„Ù‰ status
- `idx_help_requests_type` - Ø¹Ù„Ù‰ type
- `idx_help_requests_created` - Ø¹Ù„Ù‰ created_at DESC

**Check Constraints:**
- type IN ('access_request', 'permission_request', 'general_support')
- status IN ('pending', 'approved', 'rejected', 'resolved')

### 3. Frontend Help Page
**Ø§Ù„Ù…Ù„Ù:** `frontend-next/pages/help.tsx`

**Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:**
- Ù†Ù…ÙˆØ°Ø¬ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
- Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨
- Ø­Ù‚ÙˆÙ„ Ù„Ù„Ù…ÙˆØ¶ÙˆØ¹ ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø©
- Ø­Ù‚ÙˆÙ„ Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© Ù„Ù„ØµÙ„Ø§Ø­ÙŠØ© ÙˆØ§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
- Ø´Ø§Ø´Ø© Ù†Ø¬Ø§Ø­ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
- Ø±Ø³Ø§Ù„Ø© ØªÙØ³ÙŠØ±ÙŠØ© Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
- ØªÙƒØ§Ù…Ù„ Ù…Ø¹ useAuth Ùˆ useToast Ùˆ useRouter
- Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„ØºØªÙŠÙ† (Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)

### 4. ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© 403
**Ø§Ù„Ù…Ù„Ù:** `frontend-next/pages/403.tsx`

**Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:**
- Ø²Ø± "Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ©" (Request Access) ÙƒØ¥Ø¬Ø±Ø§Ø¡ Ø£Ø³Ø§Ø³ÙŠ
- ØªÙ…Ø±ÙŠØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ù‚ (Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ©) Ø¹Ø¨Ø± query parameters
- Ø±Ø³Ø§Ù„Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
- ØªØµÙ…ÙŠÙ… Ù…Ø­Ø¯Ø« ÙŠØ¹Ø·ÙŠ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

### 5. Translation Keys
**Ø§Ù„Ù…Ù„Ù:** `frontend-next/locales/translations.ts`

**Ù…ÙØ§ØªÙŠØ­ Ø¬Ø¯ÙŠØ¯Ø©:**
```typescript
common: {
  help: 'Help' / 'Ù…Ø³Ø§Ø¹Ø¯Ø©',
  back: 'Back' / 'Ø±Ø¬ÙˆØ¹',
  submit: 'Submit' / 'Ø¥Ø±Ø³Ø§Ù„',
  requestAccess: 'Request Access' / 'Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ©',
}

errors.403: {
  title, description, possibleReasons, reason1-3,
  needAccess, needAccessDescription, requestAccess
}

help: {
  title, subtitle, requestType, subject, message, messageHint,
  requestedPermission, requestedPermissionHint,
  requestedPage, requestedPageHint,
  submit, submitting, successTitle, successMessage,
  backToDashboard, reviewMessage,
  types: { access_request, permission_request, general_support },
  validation: { typeRequired, subjectRequired, ... }
}
```

## ğŸ§ª ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ
```
Ø§Ù„Ø¨Ø±ÙŠØ¯: gm@darkhawlan.com
ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: Password123
Ø§Ù„Ø¯ÙˆØ±: Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…
```

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„ØµÙØ­Ø© Ø¨Ø¯ÙˆÙ† ØµÙ„Ø§Ø­ÙŠØ©
1. Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø£ÙŠ ØµÙØ­Ø© Ù„Ø§ ØªÙ…Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§
2. Ø³ØªØ¸Ù‡Ø± ØµÙØ­Ø© 403 (Access Denied)
3. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± "Request Access" / "Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ©"

### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ù…Ù„Ø¡ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
```
URL Ø§Ù„Ù…Ø¨Ø§Ø´Ø±: http://localhost:3001/help

Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: Ø§Ø®ØªØ± "Access Request" Ø£Ùˆ "Permission Request"
- Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹: "Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"
- Ø§Ù„Ø±Ø³Ø§Ù„Ø©: "Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"

Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©:
- Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: "dashboard:view"
- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: "/dashboard"
```

### Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
1. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Submit Request" / "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"
2. ÙŠØ¬Ø¨ Ø£Ù† ØªØ¸Ù‡Ø± Ø´Ø§Ø´Ø© Ù†Ø¬Ø§Ø­ Ø®Ø¶Ø±Ø§Ø¡
3. Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø­Ø§Ù„Ø© `pending`

### Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```powershell
docker exec slms-postgres-1 psql -U slms -d slms_db -c "SELECT id, user_id, type, subject, status, created_at FROM help_requests ORDER BY id DESC LIMIT 5;"
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
```
 id | user_id |      type       |          subject           | status  |         created_at
----+---------+-----------------+----------------------------+---------+----------------------------
  1 |       9 | access_request  | Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰... | pending | 2025-12-27 11:52:30.123+00
```

### Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø§Ø®ØªØ¨Ø§Ø± API Ù…Ø¨Ø§Ø´Ø±Ø© (cURL)
```powershell
# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ token Ù…Ù† localStorage (Ù…Ù† Ù…ØªØµÙØ­)
$token = "YOUR_ACCESS_TOKEN_HERE"

# Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
docker exec slms-backend-1 curl -X POST http://localhost:4000/api/help-requests \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $token" \
  -d '{
    "type": "access_request",
    "subject": "Test Help Request",
    "message": "This is a test message for help request system.",
    "requested_permission": "dashboard:view",
    "requested_page": "/dashboard"
  }'
```

**Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…ØªÙˆÙ‚Ø¹Ø©:**
```json
{
  "id": 1,
  "user_id": 9,
  "company_id": 1,
  "type": "access_request",
  "subject": "Test Help Request",
  "message": "This is a test message...",
  "requested_permission": "dashboard:view",
  "requested_page": "/dashboard",
  "status": "pending",
  "created_at": "2025-12-27T11:52:30.123Z"
}
```

## ğŸ”„ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„ (Workflow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„ØµÙØ­Ø© Ø¨Ø¯ÙˆÙ† ØµÙ„Ø§Ø­ÙŠØ©               â”‚
â”‚    â†’ 403 Error Page                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ†Ù‚Ø± Ø¹Ù„Ù‰ "Request Access"                      â”‚
â”‚    â†’ Redirects to /help?type=access_request&page=...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…Ù„Ø£ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©                            â”‚
â”‚    - Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨                                              â”‚
â”‚    - Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹                                                â”‚
â”‚    - Ø§Ù„Ø±Ø³Ø§Ù„Ø©                                                â”‚
â”‚    - Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (optional)                          â”‚
â”‚    - Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (optional)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Frontend ÙŠØ±Ø³Ù„ POST /api/help-requests                    â”‚
â”‚    - ÙŠØ³ØªØ®Ø±Ø¬ user_id Ù…Ù† JWT token                          â”‚
â”‚    - ÙŠØ³ØªØ®Ø±Ø¬ company_id Ù…Ù† JWT token                       â”‚
â”‚    - ÙŠØ­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ database Ø¨Ø­Ø§Ù„Ø© "pending"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ø¬Ø§Ø­                                         â”‚
â”‚    - Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯                                            â”‚
â”‚    - Ø±Ø³Ø§Ù„Ø© Ø¹Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©                                     â”‚
â”‚    - Ø²Ø± "Back to Dashboard"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Ø§Ù„Ù…Ø¯ÙŠØ± ÙŠØ±Ø§Ø¬Ø¹ Ø§Ù„Ø·Ù„Ø¨ (ØµÙØ­Ø© admin - Ù‚Ø§Ø¯Ù…Ø©)                â”‚
â”‚    - GET /api/help-requests (ÙŠØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª)           â”‚
â”‚    - PUT /api/help-requests/:id (ÙŠØ­Ø¯Ø« Ø§Ù„Ø­Ø§Ù„Ø©)             â”‚
â”‚    - ÙŠØ¶ÙŠÙ admin_response                                   â”‚
â”‚    - ÙŠØºÙŠØ± status Ø¥Ù„Ù‰ approved/rejected/resolved           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª - Ù‚Ø§Ø¯Ù…)                 â”‚
â”‚    - Notification: "Your access request has been approved"  â”‚
â”‚    - Email notification (optional)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·Ù„Ø¨ (Status States)

```
pending    â†’ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© (default)
approved   â†’ ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
rejected   â†’ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¹ Ø°ÙƒØ± Ø§Ù„Ø³Ø¨Ø¨ ÙÙŠ admin_response
resolved   â†’ ØªÙ… Ø­Ù„ Ø§Ù„Ø·Ù„Ø¨ (Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø£Ùˆ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ)
```

## ğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© (Next Steps)

### 1. ØµÙØ­Ø© Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ†
**Ø§Ù„Ù…Ù„Ù:** `frontend-next/pages/admin/help-requests.tsx`

**Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ø¬Ø¯ÙˆÙ„
- ÙÙ„Ø§ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© (pending/approved/rejected/resolved)
- ÙÙ„Ø§ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹ (access_request/permission_request/general_support)
- Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ ÙƒÙ„ Ø·Ù„Ø¨
- Ø£Ø²Ø±Ø§Ø±: Approve, Reject, Resolve
- Ø­Ù‚Ù„ Ù„Ø¥Ø¯Ø®Ø§Ù„ admin_response
- Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©

### 2. API Endpoint Ù„Ù„ØªØ­Ø¯ÙŠØ«
**Ø§Ù„Ù…Ù„Ù:** `backend/src/routes/helpRequests.ts`

**Ø¥Ø¶Ø§ÙØ© endpoint Ø¬Ø¯ÙŠØ¯:**
```typescript
PUT /api/help-requests/:id
Body: {
  status: 'approved' | 'rejected' | 'resolved',
  admin_response: string
}
```

### 3. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- Ø¥Ø´Ø¹Ø§Ø± ÙÙŠ UI Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©/Ø§Ù„Ø±ÙØ¶
- Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ø®ØªÙŠØ§Ø±ÙŠ
- Badge ÙÙŠ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Header

### 4. ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø©
Ø¥Ø¶Ø§ÙØ© ÙÙŠ `permissions` table:
- `help_requests:view` - Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
- `help_requests:manage` - Ø¥Ø¯Ø§Ø±Ø© ÙˆØ­Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- `help_requests:assign_permissions` - Ø¥Ø¶Ø§ÙØ© ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

## ğŸ› Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ (Troubleshooting)

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Cannot POST /api/help-requests
**Ø§Ù„Ø­Ù„:** ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ backend Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© route
```powershell
docker restart slms-backend-1
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Table "help_requests" does not exist
**Ø§Ù„Ø­Ù„:** ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ migration
```powershell
# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¢Ø®Ø± migration
docker exec slms-backend-1 cat /app/migrations/035_create_help_requests_table.sql

# Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ backend Ù„ØªØ·Ø¨ÙŠÙ‚ migration
docker restart slms-backend-1

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† logs
docker logs slms-backend-1 | grep migration
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: 401 Unauthorized Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
**Ø§Ù„Ø­Ù„:** ØªØ­Ø¯ÙŠØ« token
1. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø¬Ø¯ÙŠØ¯
3. Token ÙÙŠ localStorage Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ù„Ø§ ØªØ¸Ù‡Ø±
**Ø§Ù„Ø­Ù„:** Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ frontend
```powershell
docker restart slms-frontend-next-1
```

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Ø§Ù„Ø£Ù…Ø§Ù†:**
   - ÙƒÙ„ Ø·Ù„Ø¨ ÙŠØªÙ…Ø±Ø¨Ø·Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù€ user_id Ù…Ù† JWT token (Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙ„Ø§Ø¹Ø¨)
   - company_id ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬Ù‡ Ù…Ù† JWT token
   - Ø§Ù„Ù…Ø¯ÙŠØ±ÙˆÙ† ÙÙ‚Ø· ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª

2. **Ø§Ù„Ø£Ø¯Ø§Ø¡:**
   - Indexes Ø¹Ù„Ù‰ user_id, company_id, status, type Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹
   - created_at DESC index Ù„Ù„ØªØ±ØªÙŠØ¨

3. **Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ:**
   - ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© attachments (ØµÙˆØ±/Ù…Ù„ÙØ§Øª)
   - ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© priority level (low/medium/high)
   - ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© SLA (Service Level Agreement)
   - ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© comments/conversation thread

## ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙÙŠØ¯Ø©

- ØµÙØ­Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: http://localhost:3001/help
- ØµÙØ­Ø© 403: http://localhost:3001/403
- API Health Check: http://localhost:4000/api/health
- Database: PostgreSQL on localhost:5432

## âœ… Checklist Ù„Ù„Ø¥ÙƒÙ…Ø§Ù„

- [x] Backend route (`helpRequests.ts`)
- [x] Database migration (035)
- [x] Frontend help page
- [x] Update 403 page with help link
- [x] Translation keys (EN + AR)
- [x] Backend restart (migration applied)
- [x] Frontend restart (translations loaded)
- [ ] Test end-to-end workflow
- [ ] Admin review interface
- [ ] PUT endpoint for status update
- [ ] Notification system integration
- [ ] Email notifications (optional)
- [ ] Permission assignment on approval

---

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:** 27 Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± (80% Ù…ÙƒØªÙ…Ù„)  
**Ø§Ù„Ù…Ø·ÙˆØ±:** AI Assistant  
**Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:** SLMS - Smart Logistics Management System
