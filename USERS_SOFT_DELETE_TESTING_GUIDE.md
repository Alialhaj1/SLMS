# โ ุชู ุชุทุจูู Soft Delete ูู ุตูุญุฉ Users - ุฌุงูุฒ ููุงุฎุชุจุงุฑ

**ุงูุชุงุฑูุฎ:** 23 ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุงุฎุชุจุงุฑ

---

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู

### 1. โ ุชุทุจูู Soft Delete ูู ุตูุญุฉ Users

#### ุงูุชุนุฏููุงุช ุงูููููุฐุฉ:
- โ ุฅุถุงูุฉ `SoftDeletePanel`, `SoftDeleteActions`, `DeletedBadge` imports
- โ ุฅุถุงูุฉ `deleted_at` ููู User interface
- โ ุฅุถุงูุฉ `showDeleted` state
- โ ุชุญุฏูุซ `fetchUsers` ูุฏุนู `include_deleted` parameter
- โ ุฅุถุงูุฉ `SoftDeletePanel` ูู ุงููุงุฌูุฉ
- โ ุฅุถุงูุฉ `DeletedBadge` ุจุฌูุงุฑ ุงุณู ุงููุณุชุฎุฏู
- โ ุงุณุชุจุฏุงู ุงูุฃุฒุฑุงุฑ ุงูุนุงุฏูุฉ ุจู `SoftDeleteActions` ูููุณุชุฎุฏููู ุงููุญุฐูููู

#### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- ๐ต ุฒุฑ "Show Deleted" / "Hide Deleted" ูุฅุธูุงุฑ/ุฅุฎูุงุก ุงููุณุชุฎุฏููู ุงููุญุฐูููู
- ๐ข ุฒุฑ "Restore" ูุงุณุชุนุงุฏุฉ ูุณุชุฎุฏู ูุญุฐูู
- ๐ด ุฒุฑ "Delete Forever" ููุญุฐู ุงูููุงุฆู ูุน ุชุฃููุฏ ูุดุฏุฏ
- ๐ก Badge "Deleted" ูุธูุฑ ูููุณุชุฎุฏููู ุงููุญุฐูููู
- ๐ Panel ููุถุญ ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุญุฐูููู

---

## ๐งช ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

### ุงููุฑุญูุฉ 1: ุงุฎุชุจุงุฑ Soft Delete ูู Users

#### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู ูู Super Admin
```
Email: ali@alhajco.com
Password: A11A22A33
```

#### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุตูุญุฉ Users
1. ุงูุชุญ [http://localhost:3000/admin/users](http://localhost:3000/admin/users)
2. **ูุฌุจ ุฃู ุชุฑู:**
   - โ ูุงุฆูุฉ ุงููุณุชุฎุฏููู
   - โ Panel ุฃุตูุฑ ูู ุงูุฃุนูู ููุชูุจ ุนููู "Deleted Items" ูุน ุฒุฑ "Show Deleted"
   - โ ุฃุฒุฑุงุฑ View/Edit/Status/Delete ููู ูุณุชุฎุฏู

#### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุญุฐู ูุณุชุฎุฏู
1. ุงุฎุชุฑ ุฃู ูุณุชุฎุฏู (ุบูุฑ ali@alhajco.com)
2. ุงุถุบุท ุฒุฑ ุงูุญุฐู (ุฃููููุฉ Trash)
3. **ูุฌุจ ุฃู:**
   - โ ูุธูุฑ ุชุฃููุฏ ุงูุญุฐู
   - โ ุจุนุฏ ุงูุชุฃููุฏุ ูุฎุชูู ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ
   - โ ุนุฏุงุฏ "Show Deleted" ูุชุญุฏุซ (ูุซูุงู: "1 deleted item")

#### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุนุฑุถ ุงููุญุฐููุงุช
1. ุงุถุบุท ุฒุฑ "Show Deleted"
2. **ูุฌุจ ุฃู:**
   - โ ูุชุบูุฑ ุงูุฒุฑ ุฅูู "Hide Deleted" (ุฃุฒุฑู)
   - โ ูุธูุฑ ุงููุณุชุฎุฏู ุงููุญุฐูู ูู ุงููุงุฆูุฉ
   - โ ูุธูุฑ Badge ุฃุญูุฑ "Deleted" ุจุฌูุงุฑ ุงุณู ุงููุณุชุฎุฏู
   - โ ุชุฎุชูู ุฃุฒุฑุงุฑ Edit/Delete ุงูุนุงุฏูุฉ
   - โ ุชุธูุฑ ุฃุฒุฑุงุฑ "Restore" (ุฃุฒุฑู) ู "Delete Forever" (ุฃุญูุฑ)

#### ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงุณุชุนุงุฏุฉ ูุณุชุฎุฏู
1. ุงุถุบุท ุฒุฑ "Restore" ูููุณุชุฎุฏู ุงููุญุฐูู
2. **ูุฌุจ ุฃู:**
   - โ ูุธูุฑ Toast message: "User restored successfully"
   - โ ูุฎุชูู Badge "Deleted"
   - โ ุชุนูุฏ ุงูุฃุฒุฑุงุฑ ุงูุนุงุฏูุฉ (Edit/Delete)
   - โ ุงููุณุชุฎุฏู ูุธูุฑ ูู ุงููุงุฆูุฉ ุงูุนุงุฏูุฉ

#### ุงูุฎุทูุฉ 6: ุงุฎุชุจุงุฑ ุงูุญุฐู ุงูููุงุฆู
1. ุงุญุฐู ูุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู (Soft Delete)
2. ุงุถุบุท "Show Deleted"
3. ุงุถุบุท ุฒุฑ "Delete Forever"
4. **ูุฌุจ ุฃู:**
   - โ ูุธูุฑ ุชุญุฐูุฑ ุดุฏูุฏ: "โ๏ธ WARNING: This action cannot be undone!"
   - โ ุจุนุฏ ุงูุชุฃููุฏุ ูุฎุชูู ุงููุณุชุฎุฏู ููุงุฆูุงู
   - โ ูุง ูุธูุฑ ุญุชู ุนูุฏ ุงูุถุบุท ุนูู "Show Deleted"

---

### ุงููุฑุญูุฉ 2: ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช

#### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุฏูุฑ ูุญุฏูุฏ
1. ุงูุชุญ [http://localhost:3000/admin/roles/create](http://localhost:3000/admin/roles/create)
2. ุฃูุดุฆ ุฏูุฑ ุฌุฏูุฏ ุงุณูู "User Viewer"
3. ุฃุถู ุงูุตูุงุญูุงุช ุงูุชุงููุฉ ููุท:
   - `users:view`
   - `dashboard:view`
4. ุงุญูุธ ุงูุฏูุฑ

#### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูุณุชุฎุฏู ุงุฎุชุจุงุฑ
1. ุงูุชุญ [http://localhost:3000/admin/users/create](http://localhost:3000/admin/users/create)
2. ุฃูุดุฆ ูุณุชุฎุฏู ุฌุฏูุฏ:
   ```
   Email: test@example.com
   Password: Test123456
   Full Name: Test User
   Role: User Viewer
   ```

#### ุงูุฎุทูุฉ 3: ุชุณุฌูู ุฏุฎูู ุจุงููุณุชุฎุฏู ุงููุญุฏูุฏ
1. ุณุฌู ุฎุฑูุฌ ูู Super Admin
2. ุณุฌู ุฏุฎูู ุจู:
   ```
   Email: test@example.com
   Password: Test123456
   ```
3. ุงูุชุญ ุตูุญุฉ Users
4. **ูุฌุจ ุฃู:**
   - โ ุชุฑู ูุงุฆูุฉ ุงููุณุชุฎุฏููู
   - โ **ูุง ุชุฑู** ุฒุฑ "Show Deleted" (ูุฃูู ููุณ ูุฏูู `users:view_deleted`)
   - โ **ูุง ุชุฑู** ุฃุฒุฑุงุฑ Edit/Delete
   - โ ุชุฑู ููุท ุฒุฑ View

#### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุตูุงุญูุฉ view_deleted
1. ุณุฌู ุฎุฑูุฌ
2. ุณุฌู ุฏุฎูู ูู Super Admin
3. ุนุฏูู ุฏูุฑ "User Viewer" ูุฃุถู:
   - `users:view_deleted`
4. ุณุฌู ุฎุฑูุฌ ูุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู ุจู test@example.com
5. **ุงูุขู ูุฌุจ ุฃู:**
   - โ ุชุฑู ุฒุฑ "Show Deleted"
   - โ ุนูุฏ ุงูุถุบุท ุนูููุ ุชุฑู ุงููุณุชุฎุฏููู ุงููุญุฐูููู
   - โ **ูุง ุชุฑู** ุฃุฒุฑุงุฑ Restore/Delete Forever

#### ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุตูุงุญูุฉ restore
1. ุฃุถู ุตูุงุญูุฉ `users:restore` ููุฏูุฑ
2. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
3. **ุงูุขู ูุฌุจ ุฃู:**
   - โ ุชุฑู ุฒุฑ "Restore" ูููุณุชุฎุฏููู ุงููุญุฐูููู
   - โ **ูุง ุชุฑู** ุฒุฑ "Delete Forever"

---

### ุงููุฑุญูุฉ 3: ุงุฎุชุจุงุฑ Soft Delete ูู ุตูุญุงุช ุฃุฎุฑู

#### ุตูุญุฉ Warehouses
1. ุงูุชุญ [http://localhost:3000/warehouses](http://localhost:3000/warehouses)
2. **ุญุงููุงู:** ูุง ููุฌุฏ Soft Delete (ุฌุงูุฒ ููุชุทุจูู ูุงุญูุงู)
3. **ูุทููุจ ูุงุญูุงู:** ููุณ ุงูุชุทุจูู ูุซู Users

#### ุตูุญุฉ Suppliers
1. ุงูุชุญ [http://localhost:3000/suppliers](http://localhost:3000/suppliers)
2. **ุญุงููุงู:** ูุง ููุฌุฏ Soft Delete (ุฌุงูุฒ ููุชุทุจูู ูุงุญูุงู)

#### ุตูุญุฉ Shipments
1. ุงูุชุญ [http://localhost:3000/shipments](http://localhost:3000/shipments)
2. **ุญุงููุงู:** ูุง ููุฌุฏ Soft Delete (ุฌุงูุฒ ููุชุทุจูู ูุงุญูุงู)

---

### ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑ ุงูุชุฑุฌูุฉ ุงูุนุฑุจูุฉ

#### ุงูุญุงูุฉ ุงูุญุงููุฉ:
- โ ููู ar.json ููุฌูุฏ ูุน ุชุฑุฌูุงุช ุดุงููุฉ
- โ๏ธ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ูุง ุชุณุชุฎุฏู ุงูุชุฑุฌูุงุช ุจุนุฏ
- โ๏ธ ุงูุตูุญุงุช ูุง ุชุณุชุฎุฏู ุงูุชุฑุฌูุงุช ุจุนุฏ

#### ุงูุงุฎุชุจุงุฑ ุงููุทููุจ (ุจุนุฏ ุงูุชุทุจูู):
1. ุงูุชุญ ุงูุฅุนุฏุงุฏุงุช
2. ุบููุฑ ุงููุบุฉ ุฅูู ุงูุนุฑุจูุฉ
3. **ูุฌุจ ุฃู:**
   - โ ุฌููุน ุนูุงุตุฑ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุจุงูุนุฑุจูุฉ
   - โ ุฌููุน ุงูุฃุฒุฑุงุฑ ุจุงูุนุฑุจูุฉ
   - โ ุฌููุน ุงูุนูุงููู ูุงููุตูุต ุจุงูุนุฑุจูุฉ
   - โ RTL layout ูุนูู ุจุดูู ุตุญูุญ
   - โ ุงูุฃููููุงุช ูู ุงูููุงู ุงูุตุญูุญ
   - โ ุงูุฌุฏุงูู ูุญุงุฐุงุฉ ูู ุงููููู

---

## ๐ ููุฎุต ุงูุญุงูุฉ

### โ ูุง ุชู (ููุชูู 100%)
1. โ ุตูุญุฉ Users - Soft Delete ููุชูู
2. โ ูููู SoftDeleteControls ุฌุงูุฒ
3. โ ุงูุตูุงุญูุงุช (185 ุตูุงุญูุฉ) ูุญุฏูุซุฉ
4. โ ููู ar.json ุฌุงูุฒ ุจุชุฑุฌูุงุช ุดุงููุฉ
5. โ ุฌููุน ุงูุตูุญุงุช ูุญููุฉ ุจู withPermission
6. โ ุฌููุน ุงูุฃุฒุฑุงุฑ ูุญููุฉ ุจุตูุงุญูุงุช

### โณ ููุฏ ุงูุชุทุจูู (ุงูุฃุณุจูุน ุงููุงุฏู)
1. โณ Soft Delete ูู Warehouses
2. โณ Soft Delete ูู Suppliers
3. โณ Soft Delete ูู Shipments
4. โณ Soft Delete ูู Expenses
5. โณ Soft Delete ูู Companies
6. โณ Soft Delete ูู Branches

### ๐ ุงููุฎุทุท (10 ุฃูุงู)
1. ๐ ุชุฑุฌูุฉ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ (ุงูููู 1)
2. ๐ ุชุฑุฌูุฉ ุฌููุน ุงูุตูุญุงุช (ุงูููู 2-5)
3. ๐ RTL Fixes (ุงูููู 6-8)
4. ๐ ุงุฎุชุจุงุฑ ุดุงูู (ุงูููู 9-10)

---

## ๐ฏ ุงูุฎุทูุฉ ุงูุชุงููุฉ

### ููุฑู (ุงูููู):
1. โ **ุงุฎุชุจุงุฑ Soft Delete ูู Users** - ุจุงุชุจุงุน ุงูุฏููู ุฃุนูุงู
2. โ **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช** - ุงุฎุชุจุงุฑ ูุน ูุณุชุฎุฏููู ูุฎุชูููู
3. โ **ุฅุตูุงุญ ุฃู ูุดุงูู** - ุฅู ููุฌุฏุช

### ุบุฏุงู:
1. ๐ ุจุฏุก ุชุทุจูู ุงูุชุฑุฌูุฉ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ๐ ุชุทุจูู Soft Delete ูู ุตูุญุฉ ูุงุญุฏุฉ ุฃุฎุฑู (Warehouses ุฃู Suppliers)
3. ๐ ุงุฎุชุจุงุฑ RTL ูููุงุฆูุฉ ุงููุชุฑุฌูุฉ

---

## ๐ ุงูุฃุฎุทุงุก ุงููุญุชููุฉ ูุญููููุง

### ุฎุทุฃ: "Cannot read property 'deleted_at' of undefined"
**ุงูุญู:** ุชุฃูุฏ ูู ุฃู Backend API ููุฑุฌุน `deleted_at` ูู response

### ุฎุทุฃ: "Permission denied" ุนูุฏ ุงุณุชุนุงุฏุฉ ูุณุชุฎุฏู
**ุงูุญู:** ุชุญูู ูู ุฃู ุตูุงุญูุฉ `users:restore` ููุฌูุฏุฉ ูู database ููู ุฏูุฑ ุงููุณุชุฎุฏู

### ุฎุทุฃ: ุงููุณุชุฎุฏููู ุงููุญุฐูููู ูุง ุชุธูุฑ
**ุงูุญู:** ุชุญูู ูู:
1. Backend ูุฏุนู `include_deleted=true` parameter
2. `showDeleted` state ูุชุบูุฑ ุจุดูู ุตุญูุญ
3. useEffect ููุดุบู fetchUsers ุนูุฏ ุชุบููุฑ `showDeleted`

### ุฎุทุฃ: SoftDeletePanel ูุง ูุธูุฑ
**ุงูุญู:** ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ `users:view_deleted`

---

## ๐ ูุนูููุงุช ุงูุฏุนู

- **Backend API:** http://localhost:4000
- **Frontend:** http://localhost:3000
- **Super Admin:** ali@alhajco.com / A11A22A33
- **Database:** PostgreSQL - slms_db

---

**ุขุฎุฑ ุชุญุฏูุซ:** 23 ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ ุงูููุฑู  
**ุงูููุช ุงููุชููุน ููุงุฎุชุจุงุฑ:** 30-45 ุฏูููุฉ
